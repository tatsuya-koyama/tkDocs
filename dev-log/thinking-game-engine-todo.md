---
title: 'ゲーム実装するときに考えることリスト'
date: '2013-12-16'
description:
categories: []
tags: [anything, Game-Development, krewFramework]
position: 5
---

# ゲーム実装するときに考えることリスト

## プロジェクト管理

### バージョン管理

- 少数精鋭の開発なら、ゲームに使う実データのための作業ファイルも Git 入れときたい
    - スプライトシート化の前の画像はまあ入れるだろうけど
    - PhotoShop の psd とか、タイルマップの tmx とか
    - 他の人が見れるようにしておくと作業・職種の障壁減る
    - ファイルサイズが気にならないレベルであればね
    - ただ、ディレクトリは asset/workfile/ みたいに分けておいてアプリのパッケージ


## みんながアクセスできちゃうグローバルなデータ領域

- よく使われるものは割り切ってグローバルにアクセスできるようにした方が無難
    - （もしくはフレームワークレベルで全 actor に引き渡すようにしとく）
    - （みんなが気楽にさわりたいものは、みんなが気楽にさわれるインタフェースを用意しておく）
    - 関係者だけでイベント投げ合うのでも実現可能だが、面倒だしオーバヘッド大きい

___

- ただし static な変数群に直接アクセスするのではなく、何らかのモデル化は行った方がよいだろう
    - こいつを通してれば、データの持ってくる元をローカルからサーバに移し替えたくなった、とかの場合でも対応が楽

## リソースマネジメント

## ローカライズ

- TextMaster 的なモデルを作ってそいつから getText するようにする
    - どの言語を返すべきかは TextMaster が初期化段階でロケール見て判断する
    - 引数をプレースフォルダで指定できるようにしておくと吉

___

    // 以下のデータあったとして
    {
        string_key_1: {
            jp: "お前は {1} を {2} 個持ってるよね",
            en: "You have {2} {1}s."
        },
        item_name_1: {
            jp: "りんご",
            en: "Apple"
        }
    }

    // こう取得するかな
    itemNum  = 10;
    itemName = getText("item_name_1");
    message  = getText("string_key_1", itemNum, itemName);  // 可変長引数もしくは配列で

    // jp -> お前は りんご を 10 個持ってるよね
    // en -> You have 10 Apples.

___

- プログラムに食わせるデータは json か XML が妥当
    - 吐き出す元ファイルは csv を Excel で編集するのが無難か？
    - Google Docs 使う派もいるけどデータ壊しやすいしバージョン管理が悩ましい

## UI どう作って組み込む

- プログラマが無茶せずに作るなら Feathers みたいなのでコードで書けばいい
    - ただこれだとアーティストとの連携がコーディングありきになるので開発のオーバヘッドはある
    <br/><br/>
- ペルソナ 3, 4 みたいなメニュー画面作りたいなら Flash とかでオーサリングしたい
    - まあこれはこれでイベントハンドリングやラベルの取り決めとかもろもろ発生するけどね
    <br/><br/>
- プログラマとアーティスト、どちら先行で作っていくかによるかな
- iPhone のリスト UI みたいなのやろうと思ったらまあ Feathers でコーディングになるよね


## スタックにのる感じのウインドウ表示

## 衝突判定

### 四分木で空間分割

- [参考リンク](http://marupeke296.com/COL_2D_No8_QuadTree.html)

## タイルマップ

### Tiled Map Editor
- ツールとしては [Tiled](http://www.mapeditor.org/) が鉄板か
- ソースとなる画像をタイル状に敷き詰めるのってよいツールあるのかな
    - 自分は PhotoShop で配置しちゃってるけど
    - ソース画像の配置とか解像度とか変えたくなったときめんどい？
        - [公式の wiki](https://github.com/bjorn/tiled/wiki/Import-from-Image)
          で Python のスクリプトが紹介されてた

___

- 2013-12-26 現在、デイリービルド版を落とすとプロパティの設定がいい感じの UI でできるのでおすすめ
    - http://blog.mapeditor.org/2013/04/tiled-development-update.html


## ゼルダみたいなマップ

### 壁との衝突判定

### めっちゃ広いのをシームレスに表示

## マリオみたいな platformer なマップ

### タイルベースじゃない感じのマップのエディタ

### ナナメの地面とかあるときの衝突判定

## サーバからゲームデータとってくる

### 通信タイミングと同期

- いわゆるブラウザゲーみたいに毎回とってくるのは無難でセキュアにしやすいが、まあうっとおしい
    - ローカルにモデルを構築してそいつからとるようにするのは基本だろう
    - あとはそのモデルがいつ通信したり、クライアントでの進捗を同期しにいったりするかという問題になる

## タッチイベント

- タッチのたびに全オブジェクトなめるとかは重いので避けたい（Starling デフォだとそうなっちゃうと思う）
- タッチマージンとかはつけられるようにしておく
    - スプライトのサイズと単純に一致するタッチ領域とかはイケてない

___

- オブジェクトをまたぐスワイプとか絡んでくると面倒
    - タッチフィルター的オブジェクト１枚上にのせてそいつでどうにかするやり方もある
    - ただし画面がスケーリングしたときにちゃんとタッチ領域もついてこれるかは考慮しておくこと


<br/><br/><br/><br/>

