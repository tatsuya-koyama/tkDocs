---
title: 'ゲームの運用フロー'
date: '2014-07-03'
description:
categories: []
tags: [anything, Game-Development]
position: 7.1
---

# ゲームの運用フローについて考える

## アセットのキャッシング

### Client Side

- アプリとかだと Server からアセット DL してローカルにキャッシュとかするよね
- Version が変わってたら DL し直す
    - 事前に何らかの方法で Version を知る必要がある

#### Version を知る方法のパターン

- 起動時とかに Version 一覧（manifest ファイル）のようなものを取得する
- 一定時間ごとに取り直す
- マスタ情報だけは必要なぶんだけ都度 Server から取得する
    - マスタ情報だけなら軽いという前提
    - Version 一覧がめっちゃ肥大化するような案件では都度とらないとスケールしない

### CDN (Contents Delivery Network)

- Akamai とかのキャッシュサーバのレイヤ
- ソースを取り直すには URL を変えてやる必要があったりするよね
    - URL の後ろに GET パラメータでバージョンをつけてやるとか
- Client は知っている Version 情報を URL にくっつけてリクエストすればいい

### 運用時の更新

- 「このリソースのバージョンはこれだよ」っていうのをデプロイしなきゃいけない
- ファイルを更新する人が一緒にバージョンも書き換える、みたいなのは面倒なのでナシ
- デプロイ前にスクリプトで全対象ファイルなめてハッシュを生成して DB に保持、とかが無難か
- Server は Client にマスタ情報を渡す際、このハッシュをくっつけてやるとかする


