---
title: 'プログラミングについて考える'
date: '2013-12-16'
description:
categories: []
tags: [anything, Programming]
position: 7
---

# プログラミングについて考える

## 美しいコードとは

- 美しいといっても様々な評価軸がある
- 処理効率や芸術性などもあるが、ここでは「人が読みやすい」（Readable）にフォーカスする

### リーダブルという観点

- リーダブル・コードとは何か
    - 処理の流れが人にとって理解しやすい
        - 素直で想像しやすいシーケンスで書かれている
        - 一つのまとまりが一つの仕事をしている
        - ネストが少ない（頭の中でスタックしなくてよい）
        - 命名が適切で具体的
    - 無駄がなく、どこを読めばいいか分かりやすい
        - 重複がない
    - 書き方に一貫性がある

> ToDo: あとで書籍「リーダブル・コード」をまとめよう

### それ以外のソフトウェア品質の観点

> 【参考】[Wikipedia: ソフトウェア品質](http://ja.wikipedia.org/wiki/%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E5%93%81%E8%B3%AA)

- 機能が充実・完成している
- CPU 消費が少ない（処理負荷が低い）
    - 計算時間が短い
- メモリ消費が少ない
- スケーラビリティがある
    - 同時に大量の処理をさばける
    - ディスク消費が少ない
- 移植しやすい
- 保守しやすい
    - 問題が発生したときにどこをどう直せばいいか分かりやすい
- 拡張性がある
    - 処理の組み替えや、つけ外しが容易なコードになっている
- テストしやすい
    - 参照透過性が保たれている（入力に対して一意に出力が決まる）
- 脆弱性が無い（セキュリティ対策がされている）
- ユーザビリティがある（ライブラリなどの場合、利用者にとって使いやすい）


## コーディングの作法

- スコープはできるだけ短く
- ネストはできるだけ浅く
- ガード節
- 参照透過性
- やっている処理のレベルを揃える
- コメントは How ではなく What を書く
- コメントは専有面積に対して情報量が多くあるべき


## 複雑なシーケンスを書くとき

- 特にゲームではよくある
- 後から見る人が、全体の流れを追いやすいようにしておきたい
    - いくつも関数ジャンプしたり分岐したりすると読むの大変 (mental stack)
    - 1 カ所に

___

- シーケンシャルなタスクがあるなら、そのタスクを 1 カ所に並べるような書き方をしたい
- 非同期の場合はちょっと工夫がいる
    - いずれにせよ、システムにタスクを登録する形で書きたい

___

- 複雑な状態遷移（AI とか、ゲームの流れ制御とか）を整理するとき、ツリーみたいなダイアグラムを書くでしょう
- それをそのままコードから見てとれるようにあってほしい
- 階層形ステートマシンを作って、状態遷移の定義が 1 ヶ所で俯瞰できるようにする
    - 状態遷移の定義が外部データにもできる状態だとよい
    - （イベントを文字列にした json などを用意するってこと）

## コンポーネント指向

- 複雑で、色々組み替えたいようなものに対してはコンポーネント指向がうまくいく
    - それぞれ干渉しないような部品を足し合わせて機能を実現するイメージ
    - 特に色んな要素が変化しやすいゲーム開発においては有効
    - ツールのプラグインとかもこれに該当

___

- ゲームのルールや、キャラクターの動きの特性などもそれぞれコンポーネントにすると吉
    - プログラミング初心者はここが思いつきにくい



<br/><br/><br/><br/>

